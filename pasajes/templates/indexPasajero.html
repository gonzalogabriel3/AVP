{% extends "plantillaBase.html" %}

{% block contenido %}
<!--Cargo el load static por si hay que mostrar alguna imagen desde el directorio assets-->
{% load static %}
<br>
<center><h2 style="color:#03585a">Adm.Pasajeros</h2></center>
<!--Valido si se recibe algun mensjae para mostrar-->
{% if messages %}
	<div class="alert alert-success">
	{% for message in messages %}
		<img src="{% static 'ok.png' %}" alt="imagenOk" style="display:inline-block;width: 25px;height: 25px" />
    	<p style="display:inline-block;"><strong>{{ message }}</strong></p>
    {% endfor %}
	</div>
{% endif %}
<br><br>
{% if pasajeros %}
	<table class="datatable display" style="width:100%">
		<thead>
			<tr>
				<th>Id pasajero</th>
				<th>Nombre</th>
				<th>Apellido</th>
				<th>DNI</th>
				<th>Fecha nacimiento</th>
				<th>Localidad</th>
				<th>Familiar de</th>
				<th>Acciones</th>
			</tr>
		</thead>
		<tbody>
	    {% for pasajero in pasajeros %}
	    	<tr>
	        	<td>{{ pasajero.id }}</td>
	        	{% if pasajero.id_familiar.id != 0 %}
	        		<td>{{ pasajero.id_familiar.nombre }}</td>
	        		<td>{{ pasajero.id_familiar.apellido }}</td>
	        		<td>{{ pasajero.id_familiar.documento }}</td>
	        		<td>{{ pasajero.id_familiar.fecha_nacimiento }}</td>
	        		<td>{{ pasajero.id_familiar.id_localidad.nombre }}</td>
	        		<td>{{ pasajero.id_agente.apellido }} {{ pasajero.id_agente.nombre }}</td>
	        		<td><a href="{% url 'formularioPasajero' pasajero.id  %}" class="btn btn-info"><span class="glyphicon glyphicon-file"></span> Generar Pasaje</a></td>
	        	{% else %}
		        	<td>{{ pasajero.id_agente.nombre }}</td>
		        	<td>{{ pasajero.id_agente.apellido }}</td>
		        	<td>{{ pasajero.id_agente.documento }}</td>
		        	<td>{{ pasajero.id_agente.fecha_nacimiento }}</td>
		        	<td>{{ pasajero.id_agente.id_localidad.nombre }}</td>
		        	<td>-</td>
		        	<td><a href="{% url 'formularioPasajero' pasajero.id %}" class="btn btn-info"><span class="glyphicon glyphicon-file"></span> Generar Pasaje</a></td>
		       {% endif %}  	
	    	</tr>
	    {% endfor %}
	    </tbody>
	    <tfoot>
			<tr>
				<th>Id pasajero</th>
				<th>Nombre</th>
				<th>Apellido</th>
				<th>DNI</th>
				<th>Fecha nacimiento</th>
				<th>Localidad</th>
				<th>Acciones</th>
			</tr>
		</tfoot>
	</table>
{% else %}
    <p>No hay pasajeros a mostrar</p>
{% endif %}


{% endblock %}
